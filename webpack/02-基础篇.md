# 一、核心概念——Entry
> Entry用来指定webpack的打包入口。


![image](https://user-images.githubusercontent.com/72426886/132118607-c71c63e9-11d7-403e-b8da-365de1c75490.png)
依赖图的入口是entry，对于非代码、字体依赖也会不断加入到依赖图中。
## 1.1 单入口: entry是一个字符串
```js
module.exports = {
  entry: './src/index.js'
}
```
## 1.2 多入口：entry是一个对象
```js
module.exports = {
  entry: {
    app: './src/app.js',
    adminApp: './src/adminApp.js'
  }
}
```
# 二、核心概念——Output
> Output用来告诉webpack如何将编译后的文件输出到磁盘
```js
module.exports = {
  entry: {
    app: './src/app.js',
    adminApp: './src/adminApp.js'
  },
  output: {
    filename: '[name].js',
    path: __dirname + '/dist'
  }
}
```
> 多入口下需要通过占位符确保文件名称的唯一，也就是通过[name].js来实现。

# 三、核心概念——Loaders
webpack开箱即用只支持JS和JSON两种文件类型，通过Loaders去支持其他文件类型并且把它们转化成有效的模块，并且可以添加到依赖图中。
> 本身是一个函数，接收源文件作为参数，返回转换的结果。

## 3.1 常见的Loaders有哪些？
![Snipaste_2021-09-05_15-51-31](https://user-images.githubusercontent.com/72426886/132119841-468a3f6d-053f-4fe6-8934-66978cc15c84.jpg)

## 3.2 Loaders的用法
```js
const path = require('path');
module.exports = {
  output:{
  filename: 'bundle.js'
  },
  module: {
    rules: [
      {test: /\.txt$/, use: 'raw-loader'}
    ]
  }
}
```
**test**指定匹配规则
**use**指定使用的loader名称
# 四、核心概念——Plugins
> 插件用于bundle文件的优化，资源管理和环境变量注入，作用于整个构建过程

## 4.2 常见的Plugins有哪些？
![image](https://user-images.githubusercontent.com/72426886/132120004-fb6c9af0-6e01-48bc-9a3b-9b5f47bbf2aa.png)

## 4.3 Plugins的用法
```js
const path = require('path');
module.exports = {
  output:{
  filename: 'bundle.js'
  },
  plugins: [
  new HtmlWebpackPlugin({template: './src/index.html'})
  ]
}
```
# 五、核心概念之Mode
> Mode 用来指定当前的构建环境是： production、development还是none

设置mode可以使用webpack内置的函数，默认值为production

## Mode的内置函数
![image](https://user-images.githubusercontent.com/72426886/132120170-6de71d7d-8842-4319-a6ef-7189bd99007d.png)

# 六、解析ES6和JSX
## 6.1 解析ES6
> 使用babel-loader，babel的配置文件是：.babelrc

```js
const path = require('path');
module.exports = {
  entry: './src/index.js',
  output:{
  filename: 'bundle.js',
  path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {test: /\.js$/, use: 'babel-loader'}
    ]
  }
}
```
### 增加ES6的babel preset配置
```js
{
  "presets": [
    "@babel/preset-env"
  ],
  "plugins":[
    "@babel/proposal-class-properties"
  ]
}
```
>  pnpm i @babel/core @babel/preset-env babel-loader -D

在.babelrc文件中配置一下：
```js
{
  "presets": [
    "@babel/preset-env"
  ]
}
```
## 6.2 解析JSX
### 增加Vue的babel preset配置
```js
{
  "presets": [
    "@babel/preset-env",
    "@babel/preset-vue"
  ],
  "plugins":[
    "@babel/proposal-class-properties"
  ]
}less
```
# 七、解析CSS、Less、Sass
## 7.1 解析CSS
css-loader用于加载.css文件，并且转换成commonjs对象

style-loader将样式通过<style>标签插入到head中。
  
```js
const path = require('path');
module.exports = {
  entry: './src/index.js',
  output:{
  filename: 'bundle.js',
  path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {test: /\.css$/, use: 'style-loader','css-loader'}
    ]
  }
}
```
 > 注意，style-loader要写在css-loader之前。
## 7.2 解析Less
  less-loader用于将less转换成css
  > less-loader要写在css-loader之后
```js
const path = require('path');
module.exports = {
  entry: './src/index.js',
  output:{
  filename: 'bundle.js',
  path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {test: /\.less$/,
       use: ['style-loader',          'css-loader',
       'less-loader'
       ]
       } ]
  }
}
```
## 八、解析图片和字体
### 8.1 解析图片
> file-loader用于处理图片
```js
const path = require('path');
module.exports = {
  entry: './src/index.js',
  output:{
  filename: 'bundle.js',
  path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {test: /\.(png|svg|jpg|gif)$/, use: 'style-loader'
      }
    ]
  }
}
```
### 8.2 解析字体

> file-loader也可用于处理字体

```js
const path = require('path');
module.exports = {
  entry: './src/index.js',
  output:{
  filename: 'bundle.js',
  path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {test: /\.(woff|woff2|eot|ttf|otf)$/, use: 'style-loader'
      }
    ]
  }
}
```
> 使用url-loader 也可以处理图片和字体，也可以设置较小资源自动base64

```js
const path = require('path');
module.exports = {
  entry: './src/index.js',
  output:{
  filename: 'bundle.js',
  path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {test: /\.(png|svg|jpg|gif)$/, use: [{
        loader: 'url-loader',
        options:{
          limit: 10240// 单位是字节，图片资源小于10KB，打包自动base64
        }
      }]
      }
    ]
  }
}
```