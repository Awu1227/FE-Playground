> 在上一小节，我们知道了，当一段代码被执行时，JavaScript引擎会对其进行编译，并创建执行上下文。但是并没有明确说明到底什么样的代码才算符合规范。

## 哪些情况下代码才算是“一段代码”，才会在执行之前就进行编译并创建执行上下文？

1. 当JavaScript执行全局代码的时候，会编译全局代码并创建全局执行上下文，而且在整个页面的生存周期中，全局1执行上下文只有一份。
2. 当调用一个函数的时候，函数体内的代码会被编译，并创建函数执行上下文，一般情况下，当函数执行结束之后，创建的函数执行上下文会被销毁。
3. 当使用eval函数的时候，eval的代码也会被编译，并创建执行上下文。

## 学习调用栈的好处
1. 可以帮助你了解JavaScript引擎背后的工作原理
2. 让你有调试JavaScript代码的能力
3. 帮助你搞定面试，因为面试过程中，调用栈也是出境率非常高的题目。

> 比如你在写JavaScript代码的时候，有时候可能会遇到栈溢出的错误，为什么会出现这种错误呢？这就涉及到了调用栈的内容

**调用栈就是用来管理函数调用关系的一种数据结构**。

```js
var a = 2
function add(){
var b = 10
return  a+b
}
add()
```
1. 在执行到函数add()之前，JavaScript引擎会为上面这段代码创建全局执行上下文，包含了声明的函数和变量。
2. 从全局执行上下文中，取出add函数代码
3. 其次，对add函数的这段代码进行编译，并创建该函数的执行上下文和可执行代码
4. 最后，执行代码，输出结果